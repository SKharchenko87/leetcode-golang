package p2943

import (
	"fmt"
	"math/rand/v2"
	"sort"
	"testing"
)

func Test_maximizeSquareGrid(t *testing.T) {
	type args struct {
		n     int
		m     int
		hBars []int
		vBars []int
	}
	tests := []struct {
		name string
		args args
		want int
	}{
		{"Example 1", args{n: 2, m: 1, hBars: []int{2, 3}, vBars: []int{2}}, 4},
		{"Example 2", args{n: 1, m: 1, hBars: []int{2}, vBars: []int{2}}, 4},
		{"Example 3", args{n: 2, m: 3, hBars: []int{2, 3}, vBars: []int{2, 4}}, 4},
		{"TestCase 90", args{n: 3, m: 2, hBars: []int{3, 2, 4}, vBars: []int{3, 2}}, 9},
	}
	for _, tt := range tests {
		t.Run(tt.name, func(t *testing.T) {
			if got := maximizeSquareHoleArea(tt.args.n, tt.args.m, tt.args.hBars, tt.args.vBars); got != tt.want {
				t.Errorf("maximizeSquareHoleArea() = %v, want %v", got, tt.want)
			}
		})
	}
}

func Benchmark_maximizeSquareHoleArea(b *testing.B) {
	bench(maximizeSquareHoleArea, b)
}

func Benchmark_maximizeSquareHoleArea0(b *testing.B) {
	bench(maximizeSquareHoleArea0, b)
}

type w struct {
	a []int
	b []float32
}

func (w w) Len() int {
	return len(w.a)
}

func (w w) Less(i, j int) bool {
	return w.b[i] < w.b[j]
}

func (w w) Swap(i, j int) {
	w.a[i], w.a[j] = w.a[j], w.a[i]
	w.b[i], w.b[j] = w.b[j], w.b[i]
}

func Test_maximizeSquareGrid2(t *testing.T) {
	indexes := make([]int, 1001)
	for i := range indexes {
		indexes[i] = i + 1
	}
	order := make([]float32, 1001)
	for i := range order {
		order[i] = rand.Float32()
	}
	s := w{indexes, order}
	sort.Sort(s)
	indexes = indexes[:750]

	fmt.Println(indexes)
}

func bench(f func(n int, m int, hBars []int, vBars []int) int, b *testing.B) {
	b.ReportAllocs()
	for i := 0; i < b.N; i++ {
		f(0, 0, []int{771, 130, 790, 476, 640, 573, 242, 275, 88, 96, 527, 669, 959, 442, 112, 479, 966, 824, 514, 448, 628, 40, 985, 509, 639, 973, 691, 626, 191, 997, 325, 349, 637, 485, 244, 872, 535, 103, 455, 341, 127, 892, 383, 531, 859, 593, 984, 132, 862, 734, 294, 52, 498, 735, 467, 505, 971, 2, 625, 580, 179, 271, 432, 775, 78, 967, 519, 436, 457, 81, 357, 463, 839, 226, 335, 219, 629, 853, 503, 881, 610, 426, 763, 181, 757, 235, 260, 429, 381, 47, 572, 254, 138, 352, 304, 26, 451, 754, 602, 365, 150, 200, 401, 676, 417, 490, 256, 499, 252, 70, 525, 783, 782, 890, 501, 664, 491, 805, 424, 120, 614, 736, 578, 530, 406, 133, 177, 44, 140, 611, 87, 841, 806, 939, 172, 621, 962, 647, 974, 331, 68, 327, 249, 652, 829, 411, 98, 255, 560, 199, 410, 32, 145, 930, 904, 522, 483, 991, 804, 690, 319, 186, 53, 588, 248, 642, 608, 66, 470, 566, 846, 987, 13, 402, 101, 999, 12, 139, 100, 532, 702, 998, 183, 265, 740, 921, 799, 725, 748, 678, 495, 176, 350, 721, 933, 445, 481, 311, 387, 57, 723, 453, 208, 305, 717, 733, 548, 512, 820, 31, 122, 727, 901, 281, 719, 682, 730, 295, 785, 556, 714, 71, 778, 722, 894, 262, 60, 119, 338, 797, 792, 635, 168, 214, 497, 333, 559, 460, 174, 46, 544, 847, 928, 368, 978, 392, 395, 215, 589, 351, 308, 477, 441, 679, 830, 211, 397, 834, 863, 970, 502, 286, 831, 443, 854, 708, 1001, 704, 238, 954, 232, 658, 623, 270, 355, 274, 624, 591, 780, 439, 376, 123, 665, 48, 857, 65, 316, 320, 761, 511, 816, 760, 195, 82, 152, 798, 67, 994, 18, 452, 668, 73, 6, 504, 51, 919, 329, 777, 160, 616, 924, 699, 960, 209, 784, 796, 99, 944, 345, 631, 672, 175, 582, 472, 843, 231, 742, 876, 950, 809, 245, 653, 599, 196, 539, 779, 220, 362, 276, 683, 125, 568, 59, 585, 233, 438, 558, 90, 151, 953, 380, 955, 290, 336, 686, 482, 765, 28, 64, 326, 995, 405, 888, 788, 910, 878, 77, 321, 446, 62, 217, 11, 257, 776, 689, 407, 600, 419, 459, 14, 373, 16, 207, 131, 86, 961, 866, 850, 687, 604, 886, 230, 310, 182, 692, 800, 192, 212, 480, 20, 29, 825, 412, 520, 755, 807, 337, 543, 201, 662, 710, 832, 905, 977, 555, 363, 768, 258, 848, 871, 221, 465, 849, 393, 547, 684, 227, 694, 508, 814, 494, 33, 76, 433, 41, 348, 557, 287, 926, 194, 126, 507, 385, 889, 510, 229, 598, 980, 943, 670, 97, 833, 851, 518, 49, 489, 167, 828, 675, 794, 114, 695, 213, 58, 240, 893, 622, 517, 819, 963, 540, 855, 434, 952, 759, 746, 15, 36, 137, 484, 163, 744, 444, 206, 838, 810, 43, 773, 288, 751, 353, 884, 666, 864, 5, 323, 957, 1000, 922, 415, 648, 447, 900, 764, 945, 523, 161, 250, 84, 858, 247, 285, 61, 488, 867, 767, 27, 136, 880, 549, 178, 25, 545, 515, 92, 315, 312, 142, 772, 306, 330, 272, 906, 468, 296, 656, 949, 513, 581, 789, 390, 93, 946, 372, 703, 282, 23, 24, 153, 674, 605, 791, 874, 225, 936, 37, 273, 817, 770, 801, 129, 164, 533, 266, 371, 677, 942, 685, 870, 822, 941, 104, 374, 313, 456, 869, 188, 553, 975, 715, 739, 688, 384, 579, 3, 116, 378, 408, 660, 756, 291, 842, 681, 421, 72, 774, 375, 113, 118, 190, 601, 171, 651, 931, 908, 812, 347, 506, 914, 618, 659, 301, 166, 162, 813, 918, 135, 30, 657, 603, 947, 617, 4, 868, 466, 671, 346, 554, 334, 632, 297, 786, 803, 594, 877, 34, 50, 450, 21, 157, 420, 474, 607, 615, 713, 749, 911, 609, 586, 898, 1, 750, 343, 815, 239, 344, 102, 732, 156, 144, 107, 228, 361, 300, 449, 630, 223, 478, 633, 158, 956, 203, 992, 193, 19, 264, 259, 222, 649, 920, 887, 596, 982, 989, 293, 595, 583, 990, 729, 108, 486, 74, 860, 882, 836, 516, 811, 613, 115, 117, 529, 269, 570, 399, 428, 462, 204, 561, 563, 85, 551, 109, 42, 983, 169, 673, 10, 701, 835, 253, 916, 284, 471, 356, 937, 487, 154, 437, 643, 218, 895, 404, 377, 826, 292, 968, 69, 716, 569, 322, 422, 934, 935, 354, 718, 364, 155, 706, 389, 148}, []int{870, 727, 495, 802, 105, 211, 791, 743, 512, 375, 98, 480, 691, 818, 840, 397, 292, 435, 8, 97, 656, 339, 772, 283, 817, 636, 729, 819, 913, 282, 121, 191, 12, 418, 253, 366, 785, 68, 911, 424, 903, 240, 29, 944, 176, 19, 289, 731, 267, 294, 459, 946, 708, 398, 941, 199, 279, 996, 448, 709, 837, 324, 959, 145, 889, 154, 261, 23, 507, 103, 591, 713, 227, 197, 208, 984, 323, 256, 118, 52, 316, 45, 952, 451, 287, 521, 69, 466, 421, 358, 107, 21, 458, 281, 286, 653, 400, 344, 399, 676, 764, 25, 970, 628, 359, 882, 547, 104, 834, 999, 866, 234, 826, 698, 907, 183, 30, 300, 958, 803, 35, 454, 318, 526, 164, 384, 415, 916, 161, 843, 522, 393, 280, 326, 811, 182, 568, 502, 351, 368, 577, 116, 346, 53, 142, 94, 361, 264, 299, 920, 6, 738, 410, 158, 893, 623, 102, 311, 616, 543, 470, 711, 655, 186, 622, 113, 730, 513, 775, 684, 922, 786, 288, 148, 761, 244, 386, 13, 348, 553, 710, 319, 96, 360, 725, 905, 463, 612, 844, 780, 589, 408, 171, 196, 579, 93, 631, 773, 880, 797, 745, 940, 943, 747, 756, 229, 373, 931, 921, 800, 993, 825, 490, 391, 71, 610, 948, 552, 886, 692, 149, 38, 758, 125, 988, 831, 611, 892, 460, 620, 258, 433, 114, 86, 588, 88, 380, 251, 778, 643, 762, 878, 329, 566, 266, 312, 881, 584, 396, 865, 75, 926, 869, 949, 735, 388, 202, 899, 972, 295, 637, 541, 127, 746, 957, 133, 845, 973, 73, 67, 226, 444, 945, 181, 278, 877, 827, 22, 18, 59, 629, 532, 429, 633, 60, 600, 381, 829, 387, 900, 777, 188, 828, 798, 820, 606, 465, 377, 714, 917, 203, 325, 58, 699, 781, 132, 934, 832, 143, 412, 481, 662, 217, 90, 14, 207, 551, 245, 705, 666, 446, 322, 461, 894, 517, 788, 997, 364, 927, 752, 503, 136, 581, 770, 84, 784, 535, 853, 849, 439, 44, 259, 751, 863, 39, 598, 124, 574, 141, 929, 131, 404, 56, 719, 442, 760, 436, 571, 739, 78, 768, 402, 301, 441, 645, 371, 955, 475, 695, 336, 649, 646, 554, 422, 669, 956, 37, 932, 807, 238, 354, 576, 583, 741, 754, 395, 736, 816, 597, 48, 755, 981, 706, 262, 644, 64, 657, 500, 206, 119, 239, 57, 306, 615, 782, 332, 582, 250, 704, 842, 990, 450, 298, 537, 209, 626, 632, 232, 455, 165, 228, 687, 740, 173, 77, 679, 809, 499, 884, 61, 74, 966, 370, 599, 467, 54, 980, 7, 265, 716, 896, 562, 156, 308, 327, 651, 34, 815, 28, 621, 879, 36, 247, 487, 317, 190, 516, 873, 160, 987, 664, 492, 652, 225, 683, 468, 168, 185, 595, 155, 876, 122, 248, 950, 87, 420, 604, 722, 681, 923, 528, 908, 337, 824, 789, 411, 850, 184, 795, 897, 33, 85, 313, 749, 514, 648, 887, 690, 534, 401, 814, 157, 531, 179, 986, 241, 403, 120, 453, 464, 515, 701, 939, 392, 724, 437, 31, 891, 567, 476, 670, 833, 910, 423, 342, 630, 270, 982, 489, 963, 938, 586, 864, 26, 613, 787, 376, 144, 434, 694, 572, 667, 152, 462, 675, 748, 565, 378, 590, 509, 904, 491, 506, 139, 852, 213, 821, 703, 92, 63, 372, 854, 596, 605, 983, 634, 557, 331, 310, 296, 230, 334, 101, 721, 414, 89, 406, 801, 680, 505, 275, 212, 343, 717, 445, 177, 545, 518, 417, 108, 72, 284, 24, 273, 659, 519, 42, 362, 224, 263, 427, 569, 115, 642, 320, 140, 20, 40, 641, 855, 268, 276, 146, 109, 732, 560, 220, 689, 456, 839, 718, 575, 759, 180, 297, 285, 315, 808, 274, 504, 875, 696, 223, 413, 918, 357, 243, 867, 355, 49, 804, 1000, 200, 678, 564, 231, 830, 765, 570, 930, 529, 947, 106, 100, 1, 723, 618, 447, 210, 494, 912, 47, 233, 469, 345, 187, 812, 452, 15, 430, 774, 321, 163, 902, 954, 192, 726, 123, 493, 488, 340, 640, 382, 660, 890, 851, 975, 218, 205, 654, 65, 95, 389, 272, 485, 964, 549, 390, 810, 66, 314, 9, 471, 533, 744, 486, 700, 305, 479, 367, 510, 425, 962, 728, 379, 871, 135, 222, 260, 961, 992, 235, 951, 169, 520, 561, 841, 665, 189, 50, 960, 671, 928, 4, 221, 835, 672, 257, 638, 194, 602, 472, 915, 627, 539, 594, 540, 134, 573, 137})
	}
}
